---
import pcImage from '../assets/image-pc.png';
import spImage from '../assets/image-sp.png';

---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>SplitText Practice</title>
	</head>
	<body>
		<main>
			<header class="header">
				<div class="header__inner">
					<p class="header__inner-text">Animation Practice 01</p>
				</div>
			</header>
			<div id="stage">
				<p class="target">
					This site is for practicing GSAP's Split Text animation.
				</p>
				<div class="image">
					<div class="image-inner">
						<picture>
							<source srcset={spImage.src} width={spImage.width} height={spImage.width} media="(max-width: 768px)">
							<img src={pcImage.src} width={pcImage.width} height={pcImage.height} alt="Candle and Pine Branches with Snowflakes">
						</picture>
					</div>
				</div>
			</div>
		</main>
	</body>
</html>

<style>
	* {
    box-sizing: border-box
	}

	:before,:after {
		box-sizing: inherit
	}

	html {
		line-height: 1.15;
		-webkit-text-size-adjust: 100%;
		-webkit-tap-highlight-color: transparent
	}

	main {
		display: block
	}

	p,table,blockquote,address,pre,iframe,form,figure,dl {
		margin: 0
	}

	h1,h2,h3,h4,h5,h6 {
		font-size: inherit;
		line-height: inherit;
		font-weight: inherit;
		margin: 0
	}

	ul,ol {
		margin: 0;
		padding: 0;
		list-style: none
	}

	dt {
		font-weight: 700
	}

	dd {
		margin-left: 0
	}

	hr {
		box-sizing: content-box;
		height: 0;
		overflow: visible;
		border: 0;
		border-top: 1px solid;
		margin: 0;
		clear: both;
		color: inherit
	}

	pre {
		font-family: monospace,monospace;
		font-size: inherit
	}

	address {
		font-style: inherit
	}

	a {
		background-color: transparent;
		text-decoration: none;
		color: inherit
	}

	abbr[title] {
		border-bottom: none;
		text-decoration: underline;
		text-decoration: underline dotted
	}

	b,strong {
		font-weight: bolder
	}

	code,kbd,samp {
		font-family: monospace,monospace;
		font-size: inherit
	}

	small {
		font-size: 80%
	}

	sub,sup {
		font-size: 75%;
		line-height: 0;
		position: relative;
		vertical-align: baseline
	}

	sub {
		bottom: -.25em
	}

	sup {
		top: -.5em
	}

	img {
		border-style: none;
		vertical-align: bottom
	}

	embed,object,iframe {
		border: 0;
		vertical-align: bottom
	}

	button,input,optgroup,select,textarea {
		-webkit-appearance: none;
		appearance: none;
		vertical-align: middle;
		color: inherit;
		font: inherit;
		border: 0;
		background: transparent;
		padding: 0;
		margin: 0;
		outline: 0;
		border-radius: 0;
		text-align: inherit
	}

	[type=checkbox] {
		-webkit-appearance: checkbox;
		appearance: checkbox
	}

	[type=radio] {
		-webkit-appearance: radio;
		appearance: radio
	}

	button,input {
		overflow: visible
	}

	button,select {
		text-transform: none
	}

	button,[type=button],[type=reset],[type=submit] {
		cursor: pointer;
		-webkit-appearance: none;
		appearance: none
	}

	button[disabled],[type=button][disabled],[type=reset][disabled],[type=submit][disabled] {
		cursor: default
	}

	input[type=submit] {
		-webkit-appearance: none;
		-moz-appearance: none;
		border-radius: 0
	}

	select {
		appearance: none;
		-moz-appearance: none;
		-webkit-appearance: none;
		background: none;
		border: none
	}

	select {
		-moz-appearance: none;
		text-indent: .01px;
		text-overflow: ""
	}

	button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner {
		border-style: none;
		padding: 0
	}

	button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring {
		outline: 1px dotted ButtonText
	}

	select::-ms-expand {
		display: none
	}

	option {
		padding: 0
	}

	fieldset {
		margin: 0;
		padding: 0;
		border: 0;
		min-width: 0
	}

	legend {
		color: inherit;
		display: table;
		max-width: 100%;
		padding: 0;
		white-space: normal
	}

	progress {
		vertical-align: baseline
	}

	textarea {
		overflow: auto
	}

	[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button {
		height: auto
	}

	[type=search] {
		outline-offset: -2px
	}

	[type=search]::-webkit-search-decoration {
		-webkit-appearance: none
	}

	::-webkit-file-upload-button {
		-webkit-appearance: button;
		font: inherit
	}

	label[for] {
		cursor: pointer
	}

	details {
		display: block
	}

	summary {
		display: list-item
	}

	[contenteditable] {
		outline: none
	}

	table {
		border-collapse: collapse;
		border-spacing: 0
	}

	caption {
		text-align: left
	}

	td,th {
		vertical-align: top;
		padding: 0
	}

	th {
		text-align: left;
		font-weight: 700
	}

	template {
		display: none
	}

	[hidden] {
		display: none
	}
	html{
		margin: 0;
		width: 100%;
		height: 100%;
	}

	body {
		width: 100%;
		max-width: 2700px;
		min-height: 100svh;
		background: #222;
		font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		position: relative;
		overscroll-behavior: none;
		margin: 0 auto;
		scrollbar-width: none;
		-ms-overflow-style: none;
		overflow: clip;
		color: #1b1b1b;
	}
	main {
		display: flex;
		align-items: center;
		justify-content: center;
		height: 100svh;
		overflow: hidden;
	}
	.header__inner {
		position: fixed;
		top: 1rem;
		left: 50%;
		transform: translateX(-50%);
		width: 16%;
		text-align: center;
		padding: 1rem 0;
		margin-inline: auto;
		background-color: white;
		border: 1px solid #4B81FF;
		border-radius: 4px;
	}
	.header__inner-text {
		font-size: 1rem;
		line-height: 1;
	}

	.info-ui {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100svh;
		padding: 36px 20px;
		z-index: 10;
		pointer-events: none;
	}
	.info-ui h1 {
		text-align: center;
		font-size: 24px;
		color: #eee;
	}
	.info-ui-box {
		position: absolute;
		bottom: 30px;
		left: 50%;
		transform: translate(-50%);
		width: fit-content;
		text-align: center;
	}
	.info-ui-box small {
		display: block;
		width: fit-content;
		font-size: 10px;
		color: #eee;
		margin: 0 auto;
	}
	#stage {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 97vw;
		height: 78svh;
		margin: 0 auto;
		border: 1px solid #555;
		position: relative;
	}
	.target {
		opacity: 0;
		position: absolute;
		width: fit-content;
		height: fit-content;
		white-space: nowrap;
		font-size: 40px;
		line-height: 1.5;
		color: #eee;
		z-index: 1;
	}
	.image {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 0;
	}
	.image-inner {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 100%;
		height: 100%;
		background: #000;
		clip-path: inset(100% 0%);
	}
	.image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	@media (max-width: 768px) {
		.info-ui {
			padding: 3.6svh 20px;
		}
		.info-ui h1 {
		font-size: 20px;
		}
		#stage {
			width: 90vw;
			height: 80svh;
		}
		.target {
			font-size: 18px;
		}
	}
</style>

<script>
	import gsap from 'gsap';
	import { SplitText } from 'gsap/SplitText';

	gsap.registerPlugin(SplitText);

	document.fonts.ready.then(() => {
		let o = window.innerWidth < 769;
		let mySplitText = SplitText.create(".target", {
			type: "chars, words, lines",
			wordsClass: "split-words"
		});

		const r = gsap.timeline({ delay: .5});
		gsap.set(".target", {opacity: 1});

		gsap.from(mySplitText.chars, {
			duration: 2.5,
			opacity: 0,
			stagger: { from: "random", each: 0.01}
		});
		r.to(mySplitText.words[3], {
			x: o ? "-88px" : "-185px",
			y: o ? "20px" : "40px",
			duration: 1.4,
			ease: "power4.out",
			stagger: .07
		}, "<2.5").to(mySplitText.words[4], {
			x: o ? "-88px" : "-185px",
			y: o ? "20px" : "40px",
			duration: 1.4,
			ease: "power4.out",
			stagger: .07
		}, "<").to(mySplitText.words[5], {
			x: o ? "-88px" : "-185px",
			y: o ? "20px" : "40px",
			duration: 1.4,
			ease: "power4.out",
			stagger: .07
		}, "<").to(mySplitText.words[6], {
			x: o ? "-265px" : "-560px",
			y: o ? "40px" : "80px",
			duration: 1.4,
			ease: "power4.out",
			stagger: .07
		}, "<").to(mySplitText.words[7], {
			x: o ? "-265px" : "-560px",
			y: o ? "40px" : "80px",
			duration: 1.4,
			ease: "power4.out",
			stagger: .07
		}, "<").to(mySplitText.words[8], {
			x: o ? "-265px" : "-560px",
			y: o ? "40px" : "80px",
			duration: 1.4,
			ease: "power4.out",
			stagger: .07
		}, "<").fromTo(".target", {
			scale: o ? 1 : .7,
			bottom: "50%", left: "50%", x: "-50%", y:"50%"
		}, {
			scale: o ? 1.8 : 1.5,
			left: o ? "175px" : "230px",
			bottom: o ? "100px" : "160px",
			x: "0%", y: "50%",
			duration: 1.4,
			ease: "power4.out",
			stagger: .07
		}, "<").to(".image-inner", {
			clipPath: "inset(0% 0%)",
			duration: 4,
			ease: "power4.inOut"
		}, "<0.1").fromTo(".image-inner img", {
			scale: 1.2,
			filter: "brightness(2)",
		}, {
			scale: 1,
			filter: "brightness(1)",
			duration: 3,
			ease: "power4.inOut"
		}, "<0.2").to(mySplitText.words[7], {
			color: "#008807",
			duration: 1.4,
			ease: "power4.out"
		}, "<2").to(mySplitText.words[8], {
			color: "#008807",
			duration: 1.4,
			ease: "power4.out"
		}, "<")
	});
</script>
